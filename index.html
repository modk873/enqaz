<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover" />
  <meta name="theme-color" content="#dc3545" />
  <title>Enqaz SOS App</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <link rel="manifest" href="/manifest.json" />
  <link rel="apple-touch-icon" href="/icon-192.png" />
</head>
<body>
  <div id="menu-backdrop" style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.25);z-index:1000;"></div>
  <button id="menu-toggle" aria-label="Open menu" style="position:fixed;top:1em;left:1em;z-index:1001;font-size:2em;background:none;border:none;cursor:pointer;">‚ò∞</button>
  <nav id="main-nav" class="side-nav" style="display:none;">
    <button id="menu-close" aria-label="Close menu" style="font-size:2em;background:none;border:none;cursor:pointer;float:right;">√ó</button>
    <div class="nav-links">
      <button id="nav-home" onclick="showPage('home');closeMenu();">Home</button>
      <button id="nav-login" onclick="showPage('login');closeMenu();">Login</button>
      <button id="nav-signup" onclick="showPage('signup');closeMenu();">Sign Up</button>
      <button id="nav-dashboard" onclick="showPage('dashboard');closeMenu();">Dashboard</button>
      <button id="nav-community" onclick="showPage('community');closeMenu();">Community</button>
      <button id="nav-profile" onclick="showPage('profile');closeMenu();">Profile</button>
    </div>
  </nav>
  <main>
    <section id="home" class="page"> 
      <h1>Welcome to Enqaz SOS App</h1>
      <div class="sos-buttons">
        <button id="emergency-sos-btn" class="sos-btn emergency">Emergency SOS</button>
        <button id="normal-sos-btn" class="sos-btn normal">Normal</button>
      </div>
      <div id="sos-message" class="message"></div>
    </section>
    <section id="login" class="page" style="display:none"> 
      <h1>Login</h1> 
      <form id="login-form">
        <label for="login-username">Username</label>
        <input id="login-username" type="text" placeholder="Enter your username" required />
        <label for="login-password">Password</label>
        <input id="login-password" type="password" placeholder="Enter your password" required />
        <button type="submit">Login</button>
        <div class="form-hint">Don't have an account? <a href="#" onclick="showPage('signup');return false;">Sign up</a></div>
      </form>
      <div id="login-message" class="message"></div>
    </section>
    <section id="signup" class="page" style="display:none"> 
      <h1>Sign Up</h1> 
      <form id="signup-form">
        <label for="signup-username">Username</label>
        <input id="signup-username" type="text" placeholder="Choose a username" required />
        <label for="signup-email">Email</label>
        <input id="signup-email" type="email" placeholder="Enter your email" required />
        <label for="signup-password">Password</label>
        <input id="signup-password" type="password" placeholder="Create a password" required />
        <button type="submit">Sign Up</button>
        <div class="form-hint">Already have an account? <a href="#" onclick="showPage('login');return false;">Login</a></div>
      </form>
      <div id="signup-message" class="message"></div>
    </section>
    <section id="dashboard" class="page" style="display:none">
      <h1>Dashboard</h1>
      <div id="dashboard-welcome"></div>
      <div id="dashboard-map" style="height:300px;width:100%;max-width:700px;margin:0 auto 1.5em auto;border-radius:12px;overflow:hidden;"></div>
      <ul id="user-alerts"></ul>
      <p>Your dashboard content goes here.</p>
    </section>
    <section id="community" class="page" style="display:none"> 
      <h1>Community</h1> 
      <button id="refresh-community-map" style="margin-bottom:1em;">Refresh Map</button>
      <div id="community-map" style="height:380px;width:100%;max-width:700px;margin:0 auto 1.5em auto;border-radius:12px;overflow:hidden;"></div>
      <ul id="volunteer-list"></ul>
      <ul id="post-list"></ul>
    </section>
    <section id="normal-cases" class="page" style="display:none">
      <h1>Normal Help Cases</h1>
      <div class="normal-cards">
        <div class="normal-card">
          <div class="normal-card-header" onclick="toggleCase('lost-item')">
            <span class="normal-icon">üîé</span> Lost Item
            <span class="accordion-arrow">‚ñº</span>
          </div>
          <div class="case-details" id="case-lost-item" style="display:none">
            <p><strong>Solution:</strong></p>
            <ol>
              <li>Stay calm and try to remember where you last had the item.</li>
              <li>Ask at the lost and found or with local authorities.</li>
              <li>Check with people nearby.</li>
            </ol>
            <button class="send-alert-btn" onclick="sendNormalCaseAlert('Lost Item')">Request Help</button>
          </div>
        </div>
        <div class="normal-card">
          <div class="normal-card-header" onclick="toggleCase('minor-injury')">
            <span class="normal-icon">ü©π</span> Minor Injury
            <span class="accordion-arrow">‚ñº</span>
          </div>
          <div class="case-details" id="case-minor-injury" style="display:none">
            <p><strong>Solution:</strong></p>
            <ol>
              <li>Clean the wound with water.</li>
              <li>Apply a bandage or plaster.</li>
              <li>Seek medical help if needed.</li>
            </ol>
            <button class="send-alert-btn" onclick="sendNormalCaseAlert('Minor Injury')">Request Help</button>
          </div>
        </div>
        <div class="normal-card">
          <div class="normal-card-header" onclick="toggleCase('need-directions')">
            <span class="normal-icon">üó∫Ô∏è</span> Need Directions
            <span class="accordion-arrow">‚ñº</span>
          </div>
          <div class="case-details" id="case-need-directions" style="display:none">
            <p><strong>Solution:</strong></p>
            <ol>
              <li>Use a map or GPS app.</li>
              <li>Ask a local or staff member.</li>
              <li>Look for signs or information desks.</li>
            </ol>
            <button class="send-alert-btn" onclick="sendNormalCaseAlert('Need Directions')">Request Help</button>
          </div>
        </div>
        <div class="normal-card">
          <div class="normal-card-header" onclick="toggleCase('flat-tire')">
            <span class="normal-icon">üöó</span> Flat Tire
            <span class="accordion-arrow">‚ñº</span>
          </div>
          <div class="case-details" id="case-flat-tire" style="display:none">
            <p><strong>Solution:</strong></p>
            <ol>
              <li>Move to a safe location.</li>
              <li>Use the spare tire if available.</li>
              <li>Call roadside assistance if needed.</li>
            </ol>
            <button class="send-alert-btn" onclick="sendNormalCaseAlert('Flat Tire')">Request Help</button>
          </div>
        </div>
        <div class="normal-card">
          <div class="normal-card-header" onclick="toggleCase('locked-out')">
            <span class="normal-icon">üîë</span> Locked Out
            <span class="accordion-arrow">‚ñº</span>
          </div>
          <div class="case-details" id="case-locked-out" style="display:none">
            <p><strong>Solution:</strong></p>
            <ol>
              <li>Look for a spare key.</li>
              <li>Contact a family member or friend.</li>
              <li>Call a locksmith if needed.</li>
            </ol>
            <button class="send-alert-btn" onclick="sendNormalCaseAlert('Locked Out')">Request Help</button>
          </div>
        </div>
        <div class="normal-card">
          <div class="normal-card-header" onclick="toggleCase('power-outage')">
            <span class="normal-icon">üí°</span> Power Outage
            <span class="accordion-arrow">‚ñº</span>
          </div>
          <div class="case-details" id="case-power-outage" style="display:none">
            <p><strong>Solution:</strong></p>
            <ol>
              <li>Check if the outage is only in your home or the whole area.</li>
              <li>Check your circuit breaker or fuse box.</li>
              <li>Contact your electricity provider if needed.</li>
            </ol>
            <button class="send-alert-btn" onclick="sendNormalCaseAlert('Power Outage')">Request Help</button>
          </div>
        </div>
        <div class="normal-card">
          <div class="normal-card-header" onclick="toggleCase('water-leak')">
            <span class="normal-icon">üíß</span> Water Leak
            <span class="accordion-arrow">‚ñº</span>
          </div>
          <div class="case-details" id="case-water-leak" style="display:none">
            <p><strong>Solution:</strong></p>
            <ol>
              <li>Turn off the main water supply.</li>
              <li>Try to contain the leak with towels or buckets.</li>
              <li>Call a plumber for assistance.</li>
            </ol>
            <button class="send-alert-btn" onclick="sendNormalCaseAlert('Water Leak')">Request Help</button>
          </div>
        </div>
        <div class="normal-card">
          <div class="normal-card-header" onclick="toggleCase('lost-child')">
            <span class="normal-icon">üßí</span> Lost Child
            <span class="accordion-arrow">‚ñº</span>
          </div>
          <div class="case-details" id="case-lost-child" style="display:none">
            <p><strong>Solution:</strong></p>
            <ol>
              <li>Alert nearby people and staff immediately.</li>
              <li>Describe the child‚Äôs appearance and clothing.</li>
              <li>Contact security or the police if not found quickly.</li>
            </ol>
            <button class="send-alert-btn" onclick="sendNormalCaseAlert('Lost Child')">Request Help</button>
          </div>
        </div>
        <div class="normal-card">
          <div class="normal-card-header" onclick="toggleCase('stuck-elevator')">
            <span class="normal-icon">üõó</span> Stuck in Elevator
            <span class="accordion-arrow">‚ñº</span>
          </div>
          <div class="case-details" id="case-stuck-elevator" style="display:none">
            <p><strong>Solution:</strong></p>
            <ol>
              <li>Stay calm and press the emergency button.</li>
              <li>Call for help using your phone if possible.</li>
              <li>Wait for professional assistance; do not attempt to exit by yourself.</li>
            </ol>
            <button class="send-alert-btn" onclick="sendNormalCaseAlert('Stuck in Elevator')">Request Help</button>
          </div>
        </div>
        <div class="normal-card">
          <div class="normal-card-header" onclick="toggleCase('pet-lost')">
            <span class="normal-icon">üêæ</span> Lost Pet
            <span class="accordion-arrow">‚ñº</span>
          </div>
          <div class="case-details" id="case-pet-lost" style="display:none">
            <p><strong>Solution:</strong></p>
            <ol>
              <li>Search the immediate area and call your pet‚Äôs name.</li>
              <li>Ask neighbors and check with local shelters.</li>
              <li>Post on social media or community boards.</li>
            </ol>
            <button class="send-alert-btn" onclick="sendNormalCaseAlert('Lost Pet')">Request Help</button>
          </div>
        </div>
      </div>
      <div id="normal-confirm-message" class="message" style="display:none;"></div>
      <button onclick="showPage('home')">Back to Home</button>
    </section>
    <section id="profile" class="page" style="display:none">
      <h1>User Profile & Registration</h1>
      <form id="profile-form">
        <label for="profile-name">Full Name</label>
        <input id="profile-name" type="text" placeholder="Enter your full name" required />

        <label for="profile-photo">Photo</label>
        <input id="profile-photo" type="file" accept="image/*" />
        <img id="profile-photo-preview" src="" alt="Photo Preview" style="display:none;max-width:120px;margin:1em 0;" />

        <label>Emergency Contacts (up to 3)</label>
        <div id="contacts-list">
          <div class="contact-row">
            <input type="text" class="contact-name" placeholder="Contact Name" />
            <input type="tel" class="contact-phone" placeholder="Phone Number" />
          </div>
        </div>
        <button type="button" id="add-contact-btn">Add Another Contact</button>

        <label>Location</label>
        <div style="display:flex;gap:1em;align-items:center;">
          <input id="profile-location" type="text" placeholder="Location (auto or manual)" readonly />
          <button type="button" id="get-location-btn">Get Current Location</button>
        </div>

        <button type="submit">Save Profile</button>
      </form>
      <div id="profile-message" class="message"></div>
    </section>
  </main>
  <script src="main.js"></script>
</body>
</html> 